{"version":3,"file":"commonHelpers.js","sources":["../src/cat-api.js","../src/index.js"],"sourcesContent":["import axios from 'axios';\n\naxios.defaults.headers.common['x-api-key'] =\n  'live_eHSvO4TLSWTzYqCyrvJFZTIkNtmC5qY8lR5EzJI3CtDw9iWFM8sR8B3RRNgqKKtM';\n\nexport const fetchBreeds = async () => {\n  const BASE_URL = `https://api.thecatapi.com/v1/breeds`;\n  return axios\n    .get(BASE_URL)\n    .then(res => {\n      return res.data;\n    })\n    .catch(err => console.log(err));\n};\n\nexport const fetchCatInfo = async id => {\n  const BASE_URL = `https://api.thecatapi.com/v1/images/search?breed_ids=${id}125`;\n  return axios\n    .get(BASE_URL)\n    .then(res => {\n      if (res.data.length === 0) {\n        throw new error();\n      }\n      return res.data;\n    })\n    .catch(err => console.log(err));\n};\n","import { fetchBreeds, fetchCatInfo } from './cat-api';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SlimSelect from 'slim-select';\n\nconst refs = {\n  select: document.querySelector('.breed-select'),\n  catInfo: document.querySelector('.cat-info'),\n  loader: document.querySelector('.loader'),\n};\n\nrefs.select.addEventListener('change', handleSelectSubmit);\n\nfetchBreeds()\n  .then(data => onSuccess(data))\n  .catch(() => {\n    refs.select.classList.add('hidden');\n    onError();\n  });\n\nfunction handleSelectSubmit(e) {\n  refs.loader.classList.remove('hidden');\n  refs.catInfo.classList.add('hidden');\n  fetchCatInfo(e.target.value)\n    .then(data => {\n      refs.catInfo.classList.remove('hidden');\n      refs.loader.classList.add('hidden');\n      // if (data.length === 0) {\n      //   onError();\n      // }\n      refs.catInfo.innerHTML = catInfoMarkup(data);\n    })\n    .catch(() => onError());\n}\n\nfunction catInfoMarkup(data) {\n  return data\n    .map(el => {\n      return `<img src=${el.url} alt=${el.breeds[0].name} width=\"400\">\n  <div class=\"content\">\n    <h2>${el.breeds[0].name}</h2>\n    <p>${el.breeds[0].description}</p>\n    <p><span>Temperament:</span> ${el.breeds[0].temperament}</p>\n  </div>`;\n    })\n    .join('');\n}\n\nfunction onSuccess(data) {\n  refs.loader.classList.add('hidden');\n  refs.select.classList.remove('hidden');\n  const selectData = data.map(el => {\n    return { text: el.name, value: el.id };\n  });\n  new SlimSelect({\n    select: '.breed-select',\n    data: selectData,\n    settings: {},\n  });\n}\n\nfunction onError() {\n  iziToast.error({\n    title: 'Error',\n    message: `Oops! Something went wrong! Try reloading the page!`,\n    layout: 2,\n    position: 'topLeft',\n    transitionIn: 'fadeInRight',\n    transitionOut: 'fadeOutLeft',\n  });\n}\n"],"names":["axios","fetchBreeds","BASE_URL","res","err","fetchCatInfo","id","refs","handleSelectSubmit","data","onSuccess","onError","e","catInfoMarkup","el","selectData","SlimSelect","iziToast"],"mappings":"owBAEAA,EAAM,SAAS,QAAQ,OAAO,aAC5B,wEAEK,MAAMC,EAAc,SAAY,CACrC,MAAMC,EAAW,sCACjB,OAAOF,EACJ,IAAIE,CAAQ,EACZ,KAAKC,GACGA,EAAI,IACZ,EACA,MAAMC,GAAO,QAAQ,IAAIA,CAAG,CAAC,CAClC,EAEaC,EAAe,MAAMC,GAAM,CACtC,MAAMJ,EAAW,wDAAwDI,OACzE,OAAON,EACJ,IAAIE,CAAQ,EACZ,KAAKC,GAAO,CACX,GAAIA,EAAI,KAAK,SAAW,EACtB,MAAM,IAAI,MAEZ,OAAOA,EAAI,IACjB,CAAK,EACA,MAAMC,GAAO,QAAQ,IAAIA,CAAG,CAAC,CAClC,ECrBMG,EAAO,CACX,OAAQ,SAAS,cAAc,eAAe,EAC9C,QAAS,SAAS,cAAc,WAAW,EAC3C,OAAQ,SAAS,cAAc,SAAS,CAC1C,EAEAA,EAAK,OAAO,iBAAiB,SAAUC,CAAkB,EAEzDP,EAAa,EACV,KAAKQ,GAAQC,EAAUD,CAAI,CAAC,EAC5B,MAAM,IAAM,CACXF,EAAK,OAAO,UAAU,IAAI,QAAQ,EAClCI,GACJ,CAAG,EAEH,SAASH,EAAmBI,EAAG,CAC7BL,EAAK,OAAO,UAAU,OAAO,QAAQ,EACrCA,EAAK,QAAQ,UAAU,IAAI,QAAQ,EACnCF,EAAaO,EAAE,OAAO,KAAK,EACxB,KAAKH,GAAQ,CACZF,EAAK,QAAQ,UAAU,OAAO,QAAQ,EACtCA,EAAK,OAAO,UAAU,IAAI,QAAQ,EAIlCA,EAAK,QAAQ,UAAYM,EAAcJ,CAAI,CACjD,CAAK,EACA,MAAM,IAAME,EAAO,CAAE,CAC1B,CAEA,SAASE,EAAcJ,EAAM,CAC3B,OAAOA,EACJ,IAAIK,GACI,YAAYA,EAAG,WAAWA,EAAG,OAAO,GAAG;AAAA;AAAA,UAE1CA,EAAG,OAAO,GAAG;AAAA,SACdA,EAAG,OAAO,GAAG;AAAA,mCACaA,EAAG,OAAO,GAAG;AAAA,SAE3C,EACA,KAAK,EAAE,CACZ,CAEA,SAASJ,EAAUD,EAAM,CACvBF,EAAK,OAAO,UAAU,IAAI,QAAQ,EAClCA,EAAK,OAAO,UAAU,OAAO,QAAQ,EACrC,MAAMQ,EAAaN,EAAK,IAAIK,IACnB,CAAE,KAAMA,EAAG,KAAM,MAAOA,EAAG,IACnC,EACD,IAAIE,EAAW,CACb,OAAQ,gBACR,KAAMD,EACN,SAAU,CAAE,CAChB,CAAG,CACH,CAEA,SAASJ,GAAU,CACjBM,EAAS,MAAM,CACb,MAAO,QACP,QAAS,sDACT,OAAQ,EACR,SAAU,UACV,aAAc,cACd,cAAe,aACnB,CAAG,CACH"}